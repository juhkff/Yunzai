var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value;import{u as useLoginState,_ as _sfc_main$2,L as LoginStateEnum}from"./LoginFormTitle.vue_vue_type_script_setup_true_lang.js";import{be as cloneDeep,bG as isString,d as defineComponent,r as ref,an as onMounted,w as watch,y as unref,b as _export_sfc,o as openBlock,e as createElementBlock,h as createBlock,aW as resolveDynamicComponent,bi as withInstall,C as computed,j as createVNode,v as createBaseVNode,i as withCtx,k as createTextVNode,m as toDisplayString,bB as Divider,M as Button,F as Fragment,x as createCommentVNode,a9 as useI18n}from"./index.js";import{d as downloadByUrl}from"./download.js";var qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(version2){if(!version2)throw new Error('"version" cannot be null or undefined');if(version2<1||version2>40)throw new Error('"version" should be in range from 1 to 40');return 4*version2+17},utils$1.getSymbolTotalCodewords=function(version2){return CODEWORDS_COUNT[version2]},utils$1.getBCHDigit=function(data){let digit=0;for(;0!==data;)digit++,data>>>=1;return digit},utils$1.setToSJISFunction=function(f){if("function"!=typeof f)throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=f},utils$1.isKanjiModeEnabled=function(){return void 0!==toSJISFunction},utils$1.toSJIS=function(kanji2){return toSJISFunction(kanji2)};var exports,errorCorrectionLevel={};function BitBuffer$1(){this.buffer=[],this.length=0}(exports=errorCorrectionLevel).L={bit:1},exports.M={bit:0},exports.Q={bit:3},exports.H={bit:2},exports.isValid=function(level){return level&&void 0!==level.bit&&level.bit>=0&&level.bit<4},exports.from=function(value,defaultValue){if(exports.isValid(value))return value;try{return function(string){if("string"!=typeof string)throw new Error("Param is not a string");switch(string.toLowerCase()){case"l":case"low":return exports.L;case"m":case"medium":return exports.M;case"q":case"quartile":return exports.Q;case"h":case"high":return exports.H;default:throw new Error("Unknown EC Level: "+string)}}(value)}catch(e){return defaultValue}},BitBuffer$1.prototype={get:function(index){const bufIndex=Math.floor(index/8);return 1==(this.buffer[bufIndex]>>>7-index%8&1)},put:function(num,length){for(let i=0;i<length;i++)this.putBit(1==(num>>>length-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(bit){const bufIndex=Math.floor(this.length/8);this.buffer.length<=bufIndex&&this.buffer.push(0),bit&&(this.buffer[bufIndex]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(size){if(!size||size<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=size,this.data=new Uint8Array(size*size),this.reservedBit=new Uint8Array(size*size)}BitMatrix$1.prototype.set=function(row,col,value,reserved){const index=row*this.size+col;this.data[index]=value,reserved&&(this.reservedBit[index]=!0)},BitMatrix$1.prototype.get=function(row,col){return this.data[row*this.size+col]},BitMatrix$1.prototype.xor=function(row,col,value){this.data[row*this.size+col]^=value},BitMatrix$1.prototype.isReserved=function(row,col){return this.reservedBit[row*this.size+col]};var bitMatrix=BitMatrix$1,alignmentPattern={};!function(exports){const getSymbolSize3=utils$1.getSymbolSize;exports.getRowColCoords=function(version2){if(1===version2)return[];const posCount=Math.floor(version2/7)+2,size=getSymbolSize3(version2),intervals=145===size?26:2*Math.ceil((size-13)/(2*posCount-2)),positions=[size-7];for(let i=1;i<posCount-1;i++)positions[i]=positions[i-1]-intervals;return positions.push(6),positions.reverse()},exports.getPositions=function(version2){const coords=[],pos=exports.getRowColCoords(version2),posLength=pos.length;for(let i=0;i<posLength;i++)for(let j=0;j<posLength;j++)0===i&&0===j||0===i&&j===posLength-1||i===posLength-1&&0===j||coords.push([pos[i],pos[j]]);return coords}}(alignmentPattern);var finderPattern={};const getSymbolSize2=utils$1.getSymbolSize;finderPattern.getPositions=function(version2){const size=getSymbolSize2(version2);return[[0,0],[size-7,0],[0,size-7]]};var maskPattern={};!function(exports){exports.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const PenaltyScores_N1=3,PenaltyScores_N2=3,PenaltyScores_N3=40,PenaltyScores_N4=10;function getMaskAt(maskPattern2,i,j){switch(maskPattern2){case exports.Patterns.PATTERN000:return(i+j)%2==0;case exports.Patterns.PATTERN001:return i%2==0;case exports.Patterns.PATTERN010:return j%3==0;case exports.Patterns.PATTERN011:return(i+j)%3==0;case exports.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case exports.Patterns.PATTERN101:return i*j%2+i*j%3==0;case exports.Patterns.PATTERN110:return(i*j%2+i*j%3)%2==0;case exports.Patterns.PATTERN111:return(i*j%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern2)}}exports.isValid=function(mask){return null!=mask&&""!==mask&&!isNaN(mask)&&mask>=0&&mask<=7},exports.from=function(value){return exports.isValid(value)?parseInt(value,10):void 0},exports.getPenaltyN1=function(data){const size=data.size;let points=0,sameCountCol=0,sameCountRow=0,lastCol=null,lastRow=null;for(let row=0;row<size;row++){sameCountCol=sameCountRow=0,lastCol=lastRow=null;for(let col=0;col<size;col++){let module=data.get(row,col);module===lastCol?sameCountCol++:(sameCountCol>=5&&(points+=PenaltyScores_N1+(sameCountCol-5)),lastCol=module,sameCountCol=1),module=data.get(col,row),module===lastRow?sameCountRow++:(sameCountRow>=5&&(points+=PenaltyScores_N1+(sameCountRow-5)),lastRow=module,sameCountRow=1)}sameCountCol>=5&&(points+=PenaltyScores_N1+(sameCountCol-5)),sameCountRow>=5&&(points+=PenaltyScores_N1+(sameCountRow-5))}return points},exports.getPenaltyN2=function(data){const size=data.size;let points=0;for(let row=0;row<size-1;row++)for(let col=0;col<size-1;col++){const last=data.get(row,col)+data.get(row,col+1)+data.get(row+1,col)+data.get(row+1,col+1);4!==last&&0!==last||points++}return points*PenaltyScores_N2},exports.getPenaltyN3=function(data){const size=data.size;let points=0,bitsCol=0,bitsRow=0;for(let row=0;row<size;row++){bitsCol=bitsRow=0;for(let col=0;col<size;col++)bitsCol=bitsCol<<1&2047|data.get(row,col),col>=10&&(1488===bitsCol||93===bitsCol)&&points++,bitsRow=bitsRow<<1&2047|data.get(col,row),col>=10&&(1488===bitsRow||93===bitsRow)&&points++}return points*PenaltyScores_N3},exports.getPenaltyN4=function(data){let darkCount=0;const modulesCount=data.data.length;for(let i=0;i<modulesCount;i++)darkCount+=data.data[i];return Math.abs(Math.ceil(100*darkCount/modulesCount/5)-10)*PenaltyScores_N4},exports.applyMask=function(pattern,data){const size=data.size;for(let col=0;col<size;col++)for(let row=0;row<size;row++)data.isReserved(row,col)||data.xor(row,col,getMaskAt(pattern,row,col))},exports.getBestMask=function(data,setupFormatFunc){const numPatterns=Object.keys(exports.Patterns).length;let bestPattern=0,lowerPenalty=Infinity;for(let p=0;p<numPatterns;p++){setupFormatFunc(p),exports.applyMask(p,data);const penalty=exports.getPenaltyN1(data)+exports.getPenaltyN2(data)+exports.getPenaltyN3(data)+exports.getPenaltyN4(data);exports.applyMask(p,data),penalty<lowerPenalty&&(lowerPenalty=penalty,bestPattern=p)}return bestPattern}}(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(version2,errorCorrectionLevel2){switch(errorCorrectionLevel2){case ECLevel$1.L:return EC_BLOCKS_TABLE[4*(version2-1)+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[4*(version2-1)+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[4*(version2-1)+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[4*(version2-1)+3];default:return}},errorCorrectionCode.getTotalCodewordsCount=function(version2,errorCorrectionLevel2){switch(errorCorrectionLevel2){case ECLevel$1.L:return EC_CODEWORDS_TABLE[4*(version2-1)+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[4*(version2-1)+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[4*(version2-1)+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[4*(version2-1)+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);!function(){let x=1;for(let i=0;i<255;i++)EXP_TABLE[i]=x,LOG_TABLE[x]=i,x<<=1,256&x&&(x^=285);for(let i=255;i<512;i++)EXP_TABLE[i]=EXP_TABLE[i-255]}(),galoisField.log=function(n){if(n<1)throw new Error("log("+n+")");return LOG_TABLE[n]},galoisField.exp=function(n){return EXP_TABLE[n]},galoisField.mul=function(x,y){return 0===x||0===y?0:EXP_TABLE[LOG_TABLE[x]+LOG_TABLE[y]]},function(exports){const GF=galoisField;exports.mul=function(p1,p2){const coeff=new Uint8Array(p1.length+p2.length-1);for(let i=0;i<p1.length;i++)for(let j=0;j<p2.length;j++)coeff[i+j]^=GF.mul(p1[i],p2[j]);return coeff},exports.mod=function(divident,divisor){let result=new Uint8Array(divident);for(;result.length-divisor.length>=0;){const coeff=result[0];for(let i=0;i<divisor.length;i++)result[i]^=GF.mul(divisor[i],coeff);let offset=0;for(;offset<result.length&&0===result[offset];)offset++;result=result.slice(offset)}return result},exports.generateECPolynomial=function(degree){let poly=new Uint8Array([1]);for(let i=0;i<degree;i++)poly=exports.mul(poly,new Uint8Array([1,GF.exp(i)]));return poly}}(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(degree){this.genPoly=void 0,this.degree=degree,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(degree){this.degree=degree,this.genPoly=Polynomial.generateECPolynomial(this.degree)},ReedSolomonEncoder$1.prototype.encode=function(data){if(!this.genPoly)throw new Error("Encoder not initialized");const paddedData=new Uint8Array(data.length+this.degree);paddedData.set(data);const remainder=Polynomial.mod(paddedData,this.genPoly),start=this.degree-remainder.length;if(start>0){const buff=new Uint8Array(this.degree);return buff.set(remainder,start),buff}return remainder};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={isValid:function(version2){return!isNaN(version2)&&version2>=1&&version2<=40}},regex={};let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+")(?:.|[\r\n]))+";regex.KANJI=new RegExp(kanji,"g"),regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),regex.BYTE=new RegExp(byte,"g"),regex.NUMERIC=new RegExp("[0-9]+","g"),regex.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^[0-9]+$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(str){return TEST_KANJI.test(str)},regex.testNumeric=function(str){return TEST_NUMERIC.test(str)},regex.testAlphanumeric=function(str){return TEST_ALPHANUMERIC.test(str)},function(exports){const VersionCheck=versionCheck,Regex=regex;exports.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},exports.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},exports.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},exports.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},exports.MIXED={bit:-1},exports.getCharCountIndicator=function(mode2,version2){if(!mode2.ccBits)throw new Error("Invalid mode: "+mode2);if(!VersionCheck.isValid(version2))throw new Error("Invalid version: "+version2);return version2>=1&&version2<10?mode2.ccBits[0]:version2<27?mode2.ccBits[1]:mode2.ccBits[2]},exports.getBestModeForData=function(dataStr){return Regex.testNumeric(dataStr)?exports.NUMERIC:Regex.testAlphanumeric(dataStr)?exports.ALPHANUMERIC:Regex.testKanji(dataStr)?exports.KANJI:exports.BYTE},exports.toString=function(mode2){if(mode2&&mode2.id)return mode2.id;throw new Error("Invalid mode")},exports.isValid=function(mode2){return mode2&&mode2.bit&&mode2.ccBits},exports.from=function(value,defaultValue){if(exports.isValid(value))return value;try{return function(string){if("string"!=typeof string)throw new Error("Param is not a string");switch(string.toLowerCase()){case"numeric":return exports.NUMERIC;case"alphanumeric":return exports.ALPHANUMERIC;case"kanji":return exports.KANJI;case"byte":return exports.BYTE;default:throw new Error("Unknown mode: "+string)}}(value)}catch(e){return defaultValue}}}(mode),function(exports){const Utils2=utils$1,ECCode2=errorCorrectionCode,ECLevel2=errorCorrectionLevel,Mode2=mode,VersionCheck=versionCheck,G18_BCH=Utils2.getBCHDigit(7973);function getReservedBitsCount(mode2,version2){return Mode2.getCharCountIndicator(mode2,version2)+4}function getTotalBitsFromDataArray(segments2,version2){let totalBits=0;return segments2.forEach((function(data){const reservedBits=getReservedBitsCount(data.mode,version2);totalBits+=reservedBits+data.getBitsLength()})),totalBits}exports.from=function(value,defaultValue){return VersionCheck.isValid(value)?parseInt(value,10):defaultValue},exports.getCapacity=function(version2,errorCorrectionLevel2,mode2){if(!VersionCheck.isValid(version2))throw new Error("Invalid QR Code version");void 0===mode2&&(mode2=Mode2.BYTE);const dataTotalCodewordsBits=8*(Utils2.getSymbolTotalCodewords(version2)-ECCode2.getTotalCodewordsCount(version2,errorCorrectionLevel2));if(mode2===Mode2.MIXED)return dataTotalCodewordsBits;const usableBits=dataTotalCodewordsBits-getReservedBitsCount(mode2,version2);switch(mode2){case Mode2.NUMERIC:return Math.floor(usableBits/10*3);case Mode2.ALPHANUMERIC:return Math.floor(usableBits/11*2);case Mode2.KANJI:return Math.floor(usableBits/13);case Mode2.BYTE:default:return Math.floor(usableBits/8)}},exports.getBestVersionForData=function(data,errorCorrectionLevel2){let seg;const ecl=ECLevel2.from(errorCorrectionLevel2,ECLevel2.M);if(Array.isArray(data)){if(data.length>1)return function(segments2,errorCorrectionLevel2){for(let currentVersion=1;currentVersion<=40;currentVersion++)if(getTotalBitsFromDataArray(segments2,currentVersion)<=exports.getCapacity(currentVersion,errorCorrectionLevel2,Mode2.MIXED))return currentVersion}(data,ecl);if(0===data.length)return 1;seg=data[0]}else seg=data;return function(mode2,length,errorCorrectionLevel2){for(let currentVersion=1;currentVersion<=40;currentVersion++)if(length<=exports.getCapacity(currentVersion,errorCorrectionLevel2,mode2))return currentVersion}(seg.mode,seg.getLength(),ecl)},exports.getEncodedBits=function(version2){if(!VersionCheck.isValid(version2)||version2<7)throw new Error("Invalid QR Code version");let d=version2<<12;for(;Utils2.getBCHDigit(d)-G18_BCH>=0;)d^=7973<<Utils2.getBCHDigit(d)-G18_BCH;return version2<<12|d}}(version);var formatInfo={};const Utils$3=utils$1,G15_BCH=Utils$3.getBCHDigit(1335);formatInfo.getEncodedBits=function(errorCorrectionLevel2,mask){const data=errorCorrectionLevel2.bit<<3|mask;let d=data<<10;for(;Utils$3.getBCHDigit(d)-G15_BCH>=0;)d^=1335<<Utils$3.getBCHDigit(d)-G15_BCH;return 21522^(data<<10|d)};var segments={};const Mode$4=mode;function NumericData(data){this.mode=Mode$4.NUMERIC,this.data=data.toString()}NumericData.getBitsLength=function(length){return 10*Math.floor(length/3)+(length%3?length%3*3+1:0)},NumericData.prototype.getLength=function(){return this.data.length},NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)},NumericData.prototype.write=function(bitBuffer2){let i,group,value;for(i=0;i+3<=this.data.length;i+=3)group=this.data.substr(i,3),value=parseInt(group,10),bitBuffer2.put(value,10);const remainingNum=this.data.length-i;remainingNum>0&&(group=this.data.substr(i),value=parseInt(group,10),bitBuffer2.put(value,3*remainingNum+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(data){this.mode=Mode$3.ALPHANUMERIC,this.data=data}AlphanumericData.getBitsLength=function(length){return 11*Math.floor(length/2)+length%2*6},AlphanumericData.prototype.getLength=function(){return this.data.length},AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)},AlphanumericData.prototype.write=function(bitBuffer2){let i;for(i=0;i+2<=this.data.length;i+=2){let value=45*ALPHA_NUM_CHARS.indexOf(this.data[i]);value+=ALPHA_NUM_CHARS.indexOf(this.data[i+1]),bitBuffer2.put(value,11)}this.data.length%2&&bitBuffer2.put(ALPHA_NUM_CHARS.indexOf(this.data[i]),6)};var alphanumericData=AlphanumericData;const Mode$2=mode;function ByteData(data){this.mode=Mode$2.BYTE,this.data="string"==typeof data?(new TextEncoder).encode(data):new Uint8Array(data)}ByteData.getBitsLength=function(length){return 8*length},ByteData.prototype.getLength=function(){return this.data.length},ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)},ByteData.prototype.write=function(bitBuffer2){for(let i=0,l=this.data.length;i<l;i++)bitBuffer2.put(this.data[i],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(data){this.mode=Mode$1.KANJI,this.data=data}KanjiData.getBitsLength=function(length){return 13*length},KanjiData.prototype.getLength=function(){return this.data.length},KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)},KanjiData.prototype.write=function(bitBuffer2){let i;for(i=0;i<this.data.length;i++){let value=Utils$2.toSJIS(this.data[i]);if(value>=33088&&value<=40956)value-=33088;else{if(!(value>=57408&&value<=60351))throw new Error("Invalid SJIS character: "+this.data[i]+"\nMake sure your charset is UTF-8");value-=49472}value=192*(value>>>8&255)+(255&value),bitBuffer2.put(value,13)}};var dijkstra2,kanjiData=KanjiData,dijkstra={exports:{}},dijkstraExports=dijkstra.exports=dijkstra2={single_source_shortest_paths:function(graph,s,d){var predecessors={},costs={};costs[s]=0;var closest,u,v,cost_of_s_to_u,adjacent_nodes,cost_of_s_to_u_plus_cost_of_e,cost_of_s_to_v,open=dijkstra2.PriorityQueue.make();for(open.push(s,0);!open.empty();)for(v in u=(closest=open.pop()).value,cost_of_s_to_u=closest.cost,adjacent_nodes=graph[u]||{})adjacent_nodes.hasOwnProperty(v)&&(cost_of_s_to_u_plus_cost_of_e=cost_of_s_to_u+adjacent_nodes[v],cost_of_s_to_v=costs[v],(void 0===costs[v]||cost_of_s_to_v>cost_of_s_to_u_plus_cost_of_e)&&(costs[v]=cost_of_s_to_u_plus_cost_of_e,open.push(v,cost_of_s_to_u_plus_cost_of_e),predecessors[v]=u));if(void 0!==d&&void 0===costs[d]){var msg=["Could not find a path from ",s," to ",d,"."].join("");throw new Error(msg)}return predecessors},extract_shortest_path_from_predecessor_list:function(predecessors,d){for(var nodes=[],u=d;u;)nodes.push(u),predecessors[u],u=predecessors[u];return nodes.reverse(),nodes},find_path:function(graph,s,d){var predecessors=dijkstra2.single_source_shortest_paths(graph,s,d);return dijkstra2.extract_shortest_path_from_predecessor_list(predecessors,d)},PriorityQueue:{make:function(opts){var key,T=dijkstra2.PriorityQueue,t={};for(key in opts=opts||{},T)T.hasOwnProperty(key)&&(t[key]=T[key]);return t.queue=[],t.sorter=opts.sorter||T.default_sorter,t},default_sorter:function(a,b){return a.cost-b.cost},push:function(value,cost){var item={value:value,cost:cost};this.queue.push(item),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};!function(exports){const Mode2=mode,NumericData2=numericData,AlphanumericData2=alphanumericData,ByteData2=byteData,KanjiData2=kanjiData,Regex=regex,Utils2=utils$1,dijkstra2=dijkstraExports;function getStringByteLength(str){return unescape(encodeURIComponent(str)).length}function getSegments(regex2,mode2,str){const segments2=[];let result;for(;null!==(result=regex2.exec(str));)segments2.push({data:result[0],index:result.index,mode:mode2,length:result[0].length});return segments2}function getSegmentsFromString(dataStr){const numSegs=getSegments(Regex.NUMERIC,Mode2.NUMERIC,dataStr),alphaNumSegs=getSegments(Regex.ALPHANUMERIC,Mode2.ALPHANUMERIC,dataStr);let byteSegs,kanjiSegs;Utils2.isKanjiModeEnabled()?(byteSegs=getSegments(Regex.BYTE,Mode2.BYTE,dataStr),kanjiSegs=getSegments(Regex.KANJI,Mode2.KANJI,dataStr)):(byteSegs=getSegments(Regex.BYTE_KANJI,Mode2.BYTE,dataStr),kanjiSegs=[]);return numSegs.concat(alphaNumSegs,byteSegs,kanjiSegs).sort((function(s1,s2){return s1.index-s2.index})).map((function(obj){return{data:obj.data,mode:obj.mode,length:obj.length}}))}function getSegmentBitsLength(length,mode2){switch(mode2){case Mode2.NUMERIC:return NumericData2.getBitsLength(length);case Mode2.ALPHANUMERIC:return AlphanumericData2.getBitsLength(length);case Mode2.KANJI:return KanjiData2.getBitsLength(length);case Mode2.BYTE:return ByteData2.getBitsLength(length)}}function buildSingleSegment(data,modesHint){let mode2;const bestMode=Mode2.getBestModeForData(data);if(mode2=Mode2.from(modesHint,bestMode),mode2!==Mode2.BYTE&&mode2.bit<bestMode.bit)throw new Error('"'+data+'" cannot be encoded with mode '+Mode2.toString(mode2)+".\n Suggested mode is: "+Mode2.toString(bestMode));switch(mode2!==Mode2.KANJI||Utils2.isKanjiModeEnabled()||(mode2=Mode2.BYTE),mode2){case Mode2.NUMERIC:return new NumericData2(data);case Mode2.ALPHANUMERIC:return new AlphanumericData2(data);case Mode2.KANJI:return new KanjiData2(data);case Mode2.BYTE:return new ByteData2(data)}}exports.fromArray=function(array){return array.reduce((function(acc,seg){return"string"==typeof seg?acc.push(buildSingleSegment(seg,null)):seg.data&&acc.push(buildSingleSegment(seg.data,seg.mode)),acc}),[])},exports.fromString=function(data,version2){const nodes=function(segs){const nodes=[];for(let i=0;i<segs.length;i++){const seg=segs[i];switch(seg.mode){case Mode2.NUMERIC:nodes.push([seg,{data:seg.data,mode:Mode2.ALPHANUMERIC,length:seg.length},{data:seg.data,mode:Mode2.BYTE,length:seg.length}]);break;case Mode2.ALPHANUMERIC:nodes.push([seg,{data:seg.data,mode:Mode2.BYTE,length:seg.length}]);break;case Mode2.KANJI:nodes.push([seg,{data:seg.data,mode:Mode2.BYTE,length:getStringByteLength(seg.data)}]);break;case Mode2.BYTE:nodes.push([{data:seg.data,mode:Mode2.BYTE,length:getStringByteLength(seg.data)}])}}return nodes}(getSegmentsFromString(data,Utils2.isKanjiModeEnabled())),graph=function(nodes,version2){const table={},graph={start:{}};let prevNodeIds=["start"];for(let i=0;i<nodes.length;i++){const nodeGroup=nodes[i],currentNodeIds=[];for(let j=0;j<nodeGroup.length;j++){const node=nodeGroup[j],key=""+i+j;currentNodeIds.push(key),table[key]={node:node,lastCount:0},graph[key]={};for(let n=0;n<prevNodeIds.length;n++){const prevNodeId=prevNodeIds[n];table[prevNodeId]&&table[prevNodeId].node.mode===node.mode?(graph[prevNodeId][key]=getSegmentBitsLength(table[prevNodeId].lastCount+node.length,node.mode)-getSegmentBitsLength(table[prevNodeId].lastCount,node.mode),table[prevNodeId].lastCount+=node.length):(table[prevNodeId]&&(table[prevNodeId].lastCount=node.length),graph[prevNodeId][key]=getSegmentBitsLength(node.length,node.mode)+4+Mode2.getCharCountIndicator(node.mode,version2))}}prevNodeIds=currentNodeIds}for(let n=0;n<prevNodeIds.length;n++)graph[prevNodeIds[n]].end=0;return{map:graph,table:table}}(nodes,version2),path=dijkstra2.find_path(graph.map,"start","end"),optimizedSegs=[];for(let i=1;i<path.length-1;i++)optimizedSegs.push(graph.table[path[i]].node);return exports.fromArray(function(segs){return segs.reduce((function(acc,curr){const prevSeg=acc.length-1>=0?acc[acc.length-1]:null;return prevSeg&&prevSeg.mode===curr.mode?(acc[acc.length-1].data+=curr.data,acc):(acc.push(curr),acc)}),[])}(optimizedSegs))},exports.rawSplit=function(data){return exports.fromArray(getSegmentsFromString(data,Utils2.isKanjiModeEnabled()))}}(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFormatInfo(matrix,errorCorrectionLevel2,maskPattern2){const size=matrix.size,bits=FormatInfo.getEncodedBits(errorCorrectionLevel2,maskPattern2);let i,mod;for(i=0;i<15;i++)mod=1==(bits>>i&1),i<6?matrix.set(i,8,mod,!0):i<8?matrix.set(i+1,8,mod,!0):matrix.set(size-15+i,8,mod,!0),i<8?matrix.set(8,size-i-1,mod,!0):i<9?matrix.set(8,15-i-1+1,mod,!0):matrix.set(8,15-i-1,mod,!0);matrix.set(size-8,8,1,!0)}function createData(version2,errorCorrectionLevel2,segments2){const buffer=new BitBuffer;segments2.forEach((function(data){buffer.put(data.mode.bit,4),buffer.put(data.getLength(),Mode.getCharCountIndicator(data.mode,version2)),data.write(buffer)}));const dataTotalCodewordsBits=8*(Utils$1.getSymbolTotalCodewords(version2)-ECCode.getTotalCodewordsCount(version2,errorCorrectionLevel2));for(buffer.getLengthInBits()+4<=dataTotalCodewordsBits&&buffer.put(0,4);buffer.getLengthInBits()%8!=0;)buffer.putBit(0);const remainingByte=(dataTotalCodewordsBits-buffer.getLengthInBits())/8;for(let i=0;i<remainingByte;i++)buffer.put(i%2?17:236,8);return function(bitBuffer2,version2,errorCorrectionLevel2){const totalCodewords=Utils$1.getSymbolTotalCodewords(version2),ecTotalCodewords=ECCode.getTotalCodewordsCount(version2,errorCorrectionLevel2),dataTotalCodewords=totalCodewords-ecTotalCodewords,ecTotalBlocks=ECCode.getBlocksCount(version2,errorCorrectionLevel2),blocksInGroup2=totalCodewords%ecTotalBlocks,blocksInGroup1=ecTotalBlocks-blocksInGroup2,totalCodewordsInGroup1=Math.floor(totalCodewords/ecTotalBlocks),dataCodewordsInGroup1=Math.floor(dataTotalCodewords/ecTotalBlocks),dataCodewordsInGroup2=dataCodewordsInGroup1+1,ecCount=totalCodewordsInGroup1-dataCodewordsInGroup1,rs=new ReedSolomonEncoder(ecCount);let offset=0;const dcData=new Array(ecTotalBlocks),ecData=new Array(ecTotalBlocks);let maxDataSize=0;const buffer=new Uint8Array(bitBuffer2.buffer);for(let b=0;b<ecTotalBlocks;b++){const dataSize=b<blocksInGroup1?dataCodewordsInGroup1:dataCodewordsInGroup2;dcData[b]=buffer.slice(offset,offset+dataSize),ecData[b]=rs.encode(dcData[b]),offset+=dataSize,maxDataSize=Math.max(maxDataSize,dataSize)}const data=new Uint8Array(totalCodewords);let i,r,index=0;for(i=0;i<maxDataSize;i++)for(r=0;r<ecTotalBlocks;r++)i<dcData[r].length&&(data[index++]=dcData[r][i]);for(i=0;i<ecCount;i++)for(r=0;r<ecTotalBlocks;r++)data[index++]=ecData[r][i];return data}(buffer,version2,errorCorrectionLevel2)}function createSymbol(data,version2,errorCorrectionLevel2,maskPattern2){let segments2;if(Array.isArray(data))segments2=Segments.fromArray(data);else{if("string"!=typeof data)throw new Error("Invalid data");{let estimatedVersion=version2;if(!estimatedVersion){const rawSegments=Segments.rawSplit(data);estimatedVersion=Version.getBestVersionForData(rawSegments,errorCorrectionLevel2)}segments2=Segments.fromString(data,estimatedVersion||40)}}const bestVersion=Version.getBestVersionForData(segments2,errorCorrectionLevel2);if(!bestVersion)throw new Error("The amount of data is too big to be stored in a QR Code");if(version2){if(version2<bestVersion)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+bestVersion+".\n")}else version2=bestVersion;const dataBits=createData(version2,errorCorrectionLevel2,segments2),moduleCount=Utils$1.getSymbolSize(version2),modules=new BitMatrix(moduleCount);return function(matrix,version2){const size=matrix.size,pos=FinderPattern.getPositions(version2);for(let i=0;i<pos.length;i++){const row=pos[i][0],col=pos[i][1];for(let r=-1;r<=7;r++)if(!(row+r<=-1||size<=row+r))for(let c=-1;c<=7;c++)col+c<=-1||size<=col+c||(r>=0&&r<=6&&(0===c||6===c)||c>=0&&c<=6&&(0===r||6===r)||r>=2&&r<=4&&c>=2&&c<=4?matrix.set(row+r,col+c,!0,!0):matrix.set(row+r,col+c,!1,!0))}}(modules,version2),function(matrix){const size=matrix.size;for(let r=8;r<size-8;r++){const value=r%2==0;matrix.set(r,6,value,!0),matrix.set(6,r,value,!0)}}(modules),function(matrix,version2){const pos=AlignmentPattern.getPositions(version2);for(let i=0;i<pos.length;i++){const row=pos[i][0],col=pos[i][1];for(let r=-2;r<=2;r++)for(let c=-2;c<=2;c++)-2===r||2===r||-2===c||2===c||0===r&&0===c?matrix.set(row+r,col+c,!0,!0):matrix.set(row+r,col+c,!1,!0)}}(modules,version2),setupFormatInfo(modules,errorCorrectionLevel2,0),version2>=7&&function(matrix,version2){const size=matrix.size,bits=Version.getEncodedBits(version2);let row,col,mod;for(let i=0;i<18;i++)row=Math.floor(i/3),col=i%3+size-8-3,mod=1==(bits>>i&1),matrix.set(row,col,mod,!0),matrix.set(col,row,mod,!0)}(modules,version2),function(matrix,data){const size=matrix.size;let inc=-1,row=size-1,bitIndex=7,byteIndex=0;for(let col=size-1;col>0;col-=2)for(6===col&&col--;;){for(let c=0;c<2;c++)if(!matrix.isReserved(row,col-c)){let dark=!1;byteIndex<data.length&&(dark=1==(data[byteIndex]>>>bitIndex&1)),matrix.set(row,col-c,dark),bitIndex--,-1===bitIndex&&(byteIndex++,bitIndex=7)}if(row+=inc,row<0||size<=row){row-=inc,inc=-inc;break}}}(modules,dataBits),isNaN(maskPattern2)&&(maskPattern2=MaskPattern.getBestMask(modules,setupFormatInfo.bind(null,modules,errorCorrectionLevel2))),MaskPattern.applyMask(maskPattern2,modules),setupFormatInfo(modules,errorCorrectionLevel2,maskPattern2),{modules:modules,version:version2,errorCorrectionLevel:errorCorrectionLevel2,maskPattern:maskPattern2,segments:segments2}}qrcode.create=function(data,options){if(void 0===data||""===data)throw new Error("No input text");let version2,mask,errorCorrectionLevel2=ECLevel.M;return void 0!==options&&(errorCorrectionLevel2=ECLevel.from(options.errorCorrectionLevel,ECLevel.M),version2=Version.from(options.version),mask=MaskPattern.from(options.maskPattern),options.toSJISFunc&&Utils$1.setToSJISFunction(options.toSJISFunc)),createSymbol(data,version2,errorCorrectionLevel2,mask)};var canvas={},utils={};!function(exports){function hex2rgba(hex){if("number"==typeof hex&&(hex=hex.toString()),"string"!=typeof hex)throw new Error("Color should be defined as hex string");let hexCode=hex.slice().replace("#","").split("");if(hexCode.length<3||5===hexCode.length||hexCode.length>8)throw new Error("Invalid hex color: "+hex);3!==hexCode.length&&4!==hexCode.length||(hexCode=Array.prototype.concat.apply([],hexCode.map((function(c){return[c,c]})))),6===hexCode.length&&hexCode.push("F","F");const hexValue=parseInt(hexCode.join(""),16);return{r:hexValue>>24&255,g:hexValue>>16&255,b:hexValue>>8&255,a:255&hexValue,hex:"#"+hexCode.slice(0,6).join("")}}exports.getOptions=function(options){options||(options={}),options.color||(options.color={});const margin=void 0===options.margin||null===options.margin||options.margin<0?4:options.margin,width=options.width&&options.width>=21?options.width:void 0,scale=options.scale||4;return{width:width,scale:width?4:scale,margin:margin,color:{dark:hex2rgba(options.color.dark||"#000000ff"),light:hex2rgba(options.color.light||"#ffffffff")},type:options.type,rendererOpts:options.rendererOpts||{}}},exports.getScale=function(qrSize,opts){return opts.width&&opts.width>=qrSize+2*opts.margin?opts.width/(qrSize+2*opts.margin):opts.scale},exports.getImageWidth=function(qrSize,opts){const scale=exports.getScale(qrSize,opts);return Math.floor((qrSize+2*opts.margin)*scale)},exports.qrToImageData=function(imgData,qr,opts){const size=qr.modules.size,data=qr.modules.data,scale=exports.getScale(size,opts),symbolSize=Math.floor((size+2*opts.margin)*scale),scaledMargin=opts.margin*scale,palette=[opts.color.light,opts.color.dark];for(let i=0;i<symbolSize;i++)for(let j=0;j<symbolSize;j++){let posDst=4*(i*symbolSize+j),pxColor=opts.color.light;if(i>=scaledMargin&&j>=scaledMargin&&i<symbolSize-scaledMargin&&j<symbolSize-scaledMargin){pxColor=palette[data[Math.floor((i-scaledMargin)/scale)*size+Math.floor((j-scaledMargin)/scale)]?1:0]}imgData[posDst++]=pxColor.r,imgData[posDst++]=pxColor.g,imgData[posDst++]=pxColor.b,imgData[posDst]=pxColor.a}}}(utils),function(exports){const Utils2=utils;exports.render=function(qrData,canvas2,options){let opts=options,canvasEl=canvas2;void 0!==opts||canvas2&&canvas2.getContext||(opts=canvas2,canvas2=void 0),canvas2||(canvasEl=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),opts=Utils2.getOptions(opts);const size=Utils2.getImageWidth(qrData.modules.size,opts),ctx=canvasEl.getContext("2d"),image=ctx.createImageData(size,size);return Utils2.qrToImageData(image.data,qrData,opts),function(ctx,canvas2,size){ctx.clearRect(0,0,canvas2.width,canvas2.height),canvas2.style||(canvas2.style={}),canvas2.height=size,canvas2.width=size,canvas2.style.height=size+"px",canvas2.style.width=size+"px"}(ctx,canvasEl,size),ctx.putImageData(image,0,0),canvasEl},exports.renderToDataURL=function(qrData,canvas2,options){let opts=options;void 0!==opts||canvas2&&canvas2.getContext||(opts=canvas2,canvas2=void 0),opts||(opts={});const canvasEl=exports.render(qrData,canvas2,opts),type=opts.type||"image/png",rendererOpts=opts.rendererOpts||{};return canvasEl.toDataURL(type,rendererOpts.quality)}}(canvas);var svgTag={};const Utils=utils;function getColorAttrib(color,attrib){const alpha=color.a/255,str=attrib+'="'+color.hex+'"';return alpha<1?str+" "+attrib+'-opacity="'+alpha.toFixed(2).slice(1)+'"':str}function svgCmd(cmd,x,y){let str=cmd+x;return void 0!==y&&(str+=" "+y),str}svgTag.render=function(qrData,options,cb){const opts=Utils.getOptions(options),size=qrData.modules.size,data=qrData.modules.data,qrcodesize=size+2*opts.margin,bg=opts.color.light.a?"<path "+getColorAttrib(opts.color.light,"fill")+' d="M0 0h'+qrcodesize+"v"+qrcodesize+'H0z"/>':"",path="<path "+getColorAttrib(opts.color.dark,"stroke")+' d="'+function(data,size,margin){let path="",moveBy=0,newRow=!1,lineLength=0;for(let i=0;i<data.length;i++){const col=Math.floor(i%size),row=Math.floor(i/size);col||newRow||(newRow=!0),data[i]?(lineLength++,i>0&&col>0&&data[i-1]||(path+=newRow?svgCmd("M",col+margin,.5+row+margin):svgCmd("m",moveBy,0),moveBy=0,newRow=!1),col+1<size&&data[i+1]||(path+=svgCmd("h",lineLength),lineLength=0)):moveBy++}return path}(data,size,opts.margin)+'"/>',viewBox='viewBox="0 0 '+qrcodesize+" "+qrcodesize+'"',svgTag2='<svg xmlns="http://www.w3.org/2000/svg" '+(opts.width?'width="'+opts.width+'" height="'+opts.width+'" ':"")+viewBox+' shape-rendering="crispEdges">'+bg+path+"</svg>\n";return"function"==typeof cb&&cb(null,svgTag2),svgTag2};const canPromise=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},QRCode=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(renderFunc,canvas2,text,opts,cb){const args=[].slice.call(arguments,1),argsNum=args.length,isLastArgCb="function"==typeof args[argsNum-1];if(!isLastArgCb&&!canPromise())throw new Error("Callback required as last argument");if(!isLastArgCb){if(argsNum<1)throw new Error("Too few arguments provided");return 1===argsNum?(text=canvas2,canvas2=opts=void 0):2!==argsNum||canvas2.getContext||(opts=text,text=canvas2,canvas2=void 0),new Promise((function(resolve,reject){try{const data=QRCode.create(text,opts);resolve(renderFunc(data,canvas2,opts))}catch(e){reject(e)}}))}if(argsNum<2)throw new Error("Too few arguments provided");2===argsNum?(cb=text,text=canvas2,canvas2=opts=void 0):3===argsNum&&(canvas2.getContext&&void 0===cb?(cb=opts,opts=void 0):(cb=opts,opts=text,text=canvas2,canvas2=void 0));try{const data=QRCode.create(text,opts);cb(null,renderFunc(data,canvas2,opts))}catch(e){cb(e)}}QRCode.create;var toCanvas$1=renderCanvas.bind(null,CanvasRenderer.render),toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL);renderCanvas.bind(null,(function(data,_,opts){return SvgRenderer.render(data,opts)}));const renderQrCode=({canvas:canvas2,content:content,width:width=0,options:params={}})=>{const options=cloneDeep(params);return options.errorCorrectionLevel=options.errorCorrectionLevel||function(content){return content.length>36?"M":content.length>16?"Q":"H"}(content),function(content,options){const _canvas=document.createElement("canvas");return toCanvas$1(_canvas,content,options).then((()=>_canvas.width))}(content,options).then((_width=>(options.scale=0===width?void 0:width/_width*4,toCanvas$1(canvas2,content,options))))};const drawLogo=({canvas:canvas2,logo:logo})=>{if(!logo)return new Promise((resolve=>{resolve(canvas2.toDataURL())}));const canvasWidth=canvas2.width,{logoSize:logoSize=.15,bgColor:bgColor="#ffffff",borderSize:borderSize=.05,crossOrigin:crossOrigin,borderRadius:borderRadius=8,logoRadius:logoRadius=0}=logo,logoSrc=isString(logo)?logo:logo.src,logoWidth=canvasWidth*logoSize,logoXY=canvasWidth*(1-logoSize)/2,logoBgWidth=canvasWidth*(logoSize+borderSize),logoBgXY=canvasWidth*(1-logoSize-borderSize)/2,ctx=canvas2.getContext("2d");if(!ctx)return;canvasRoundRect(ctx)(logoBgXY,logoBgXY,logoBgWidth,logoBgWidth,borderRadius),ctx.fillStyle=bgColor,ctx.fill();const image=new Image;(crossOrigin||logoRadius)&&image.setAttribute("crossOrigin",crossOrigin||"anonymous"),image.src=logoSrc;return new Promise((resolve=>{image.onload=()=>{var image2;logoRadius?(image2=>{const canvasImage=document.createElement("canvas");canvasImage.width=logoXY+logoWidth,canvasImage.height=logoXY+logoWidth;const imageCanvas=canvasImage.getContext("2d");if(!imageCanvas||!ctx)return;if(imageCanvas.drawImage(image2,logoXY,logoXY,logoWidth,logoWidth),canvasRoundRect(ctx)(logoXY,logoXY,logoWidth,logoWidth,logoRadius),!ctx)return;const fillStyle=ctx.createPattern(canvasImage,"no-repeat");fillStyle&&(ctx.fillStyle=fillStyle,ctx.fill())})(image):(image2=image,ctx.drawImage(image2,logoXY,logoXY,logoWidth,logoWidth)),resolve(canvas2.toDataURL())}}))};function canvasRoundRect(ctx){return(x,y,w,h,r)=>{const minSize=Math.min(w,h);return r>minSize/2&&(r=minSize/2),ctx.beginPath(),ctx.moveTo(x+r,y),ctx.arcTo(x+w,y,x+w,y+h,r),ctx.arcTo(x+w,y+h,x,y+h,r),ctx.arcTo(x,y+h,x,y,r),ctx.arcTo(x,y,x+w,y,r),ctx.closePath(),ctx}}const QrCode=withInstall(_export_sfc(defineComponent({name:"QrCode",props:{value:{type:[String,Array],default:null},options:{type:Object,default:null},width:{type:Number,default:200},logo:{type:[String,Object],default:""},tag:{type:String,default:"canvas",validator:v=>["canvas","img"].includes(v)}},emits:{done:data=>!!data,error:error=>!!error},setup(props,{emit:emit}){const wrapRef=ref(null);function createQrcode(){return __this=this,__arguments=null,generator=function*(){try{const{tag:tag,value:value,options:options={},width:width,logo:logo}=props,renderValue=String(value),wrapEl=unref(wrapRef);if(!wrapEl)return;if("canvas"===tag){const url=yield(options=>renderQrCode(options).then((()=>options)).then(drawLogo))({canvas:wrapEl,width:width,logo:logo,content:renderValue,options:options||{}});return void emit("done",{url:url,ctx:wrapEl.getContext("2d")})}if("img"===tag){const url=yield toDataURL(renderValue,((a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a})({errorCorrectionLevel:"H",width:width},options));unref(wrapRef).src=url,emit("done",{url:url})}}catch(error){emit("error",error)}},new Promise(((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())}));var __this,__arguments,generator}return onMounted(createQrcode),watch(props,(()=>{createQrcode()}),{deep:!0}),{wrapRef:wrapRef,download:function(fileName){let url="";const wrapEl=unref(wrapRef);wrapEl instanceof HTMLCanvasElement?url=wrapEl.toDataURL():wrapEl instanceof HTMLImageElement&&(url=wrapEl.src),url&&downloadByUrl({url:url,fileName:fileName})}}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createElementBlock("div",null,[(openBlock(),createBlock(resolveDynamicComponent(_ctx.tag),{ref:"wrapRef"},null,512))])}]])),_hoisted_1={class:"enter-x min-w-64 min-h-64"},_sfc_main=defineComponent({__name:"QrCodeForm",setup(__props){const{t:t}=useI18n(),{handleBackLogin:handleBackLogin,getLoginState:getLoginState}=useLoginState(),getShow=computed((()=>unref(getLoginState)===LoginStateEnum.QR_CODE));return(_ctx,_cache)=>getShow.value?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(_sfc_main$2,{class:"enter-x"}),createBaseVNode("div",_hoisted_1,[createVNode(unref(QrCode),{value:"https://vvbin.cn/next/login",class:"enter-x flex justify-center xl:justify-start",width:280}),createVNode(unref(Divider),{class:"enter-x"},{default:withCtx((()=>[createTextVNode(toDisplayString(unref(t)("sys.login.scanSign")),1)])),_:1}),createVNode(unref(Button),{size:"large",block:"",class:"mt-4 enter-x",onClick:unref(handleBackLogin)},{default:withCtx((()=>[createTextVNode(toDisplayString(unref(t)("sys.login.backSignIn")),1)])),_:1},8,["onClick"])])],64)):createCommentVNode("",!0)}});export{_sfc_main as _};
