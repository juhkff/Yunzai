import{a5 as defHttp,d as defineComponent,r as ref,a9 as useI18n,bd as useErrorLogStore,w as watch,n as nextTick,be as cloneDeep,c as resolveComponent,o as openBlock,e as createElementBlock,F as Fragment,f as renderList,T as withDirectives,X as vShow,j as createVNode,y as unref,i as withCtx,k as createTextVNode,m as toDisplayString,h as createBlock,x as createCommentVNode}from"./index.js";import{_ as _sfc_main$1}from"./DetailModal.vue_vue_type_script_setup_true_lang.js";import{B as BasicTable}from"./TableImg.vue_vue_type_style_index_0_lang.js";import{T as TableAction}from"./BasicForm.vue_vue_type_style_index_0_lang.js";import{u as useTable}from"./useTable.js";import{a as useModal}from"./index19.js";import{getColumns}from"./data.js";import"./index31.js";/* empty css       */import"./BasicForm.js";import"./upperFirst.js";import"./uniqBy.js";import"./index30.js";import"./index32.js";import"./onMountedOrActivated.js";import"./useWindowSizeFn.js";import"./useContentViewHeight.js";import"./ArrowLeftOutlined.js";import"./transButton.js";import"./index21.js";import"./index22.js";import"./merge.js";import"./sortable.esm.js";import"./RedoOutlined.js";import"./FullscreenOutlined.js";import"./scrollTo.js";import"./index33.js";import"./useFormItem.js";import"./DeleteOutlined.js";import"./download.js";import"./index23.js";import"./index24.js";const _hoisted_1={class:"p-4"},_hoisted_2=["src"],_sfc_main=defineComponent({__name:"index",setup(__props){const rowInfo=ref(),imgList=ref([]),{t:t}=useI18n(),errorLogStore=useErrorLogStore(),[register,{setTableData:setTableData}]=useTable({title:t("sys.errorLog.tableTitle"),columns:getColumns(),actionColumn:{width:80,title:"Action",dataIndex:"action"}}),[registerModal,{openModal:openModal}]=useModal();function handleDetail(row){rowInfo.value=row,openModal(!0)}function fireVueError(){throw new Error("fire vue error!")}function fireResourceError(){imgList.value.push(`${(new Date).getTime()}.png`)}function fireAjaxError(){return __this=this,__arguments=null,generator=function*(){yield defHttp.get({url:"/error"})},new Promise(((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())}));var __this,__arguments,generator}return watch((()=>errorLogStore.getErrorLogInfoList),(list=>{nextTick((()=>{setTableData(cloneDeep(list))}))}),{immediate:!0}),(_ctx,_cache)=>{const _component_a_button=resolveComponent("a-button");return openBlock(),createElementBlock("div",_hoisted_1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(imgList.value,(src=>withDirectives((openBlock(),createElementBlock("img",{key:src,src:src,alt:""},null,8,_hoisted_2)),[[vShow,!1]]))),128)),createVNode(_sfc_main$1,{info:rowInfo.value,onRegister:unref(registerModal)},null,8,["info","onRegister"]),createVNode(unref(BasicTable),{onRegister:unref(register),class:"error-handle-table"},{toolbar:withCtx((()=>[createVNode(_component_a_button,{onClick:fireVueError,type:"primary"},{default:withCtx((()=>[createTextVNode(toDisplayString(unref(t)("sys.errorLog.fireVueError")),1)])),_:1}),createVNode(_component_a_button,{onClick:fireResourceError,type:"primary"},{default:withCtx((()=>[createTextVNode(toDisplayString(unref(t)("sys.errorLog.fireResourceError")),1)])),_:1}),createVNode(_component_a_button,{onClick:fireAjaxError,type:"primary"},{default:withCtx((()=>[createTextVNode(toDisplayString(unref(t)("sys.errorLog.fireAjaxError")),1)])),_:1})])),bodyCell:withCtx((({column:column,record:record})=>["action"===column.key?(openBlock(),createBlock(unref(TableAction),{key:0,actions:[{label:unref(t)("sys.errorLog.tableActionDesc"),onClick:handleDetail.bind(null,record)}]},null,8,["actions"])):createCommentVNode("",!0)])),_:1},8,["onRegister"])])}}});export{_sfc_main as default};
