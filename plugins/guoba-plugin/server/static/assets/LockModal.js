import{d as defineComponent,E as useDesign,a3 as useUserStore,C as computed,B as useForm,a9 as useI18n,b as _export_sfc,c as resolveComponent,o as openBlock,h as createBlock,i as withCtx,v as createBaseVNode,z as normalizeClass,m as toDisplayString,j as createVNode,k as createTextVNode,D as mergeProps}from"./index.js";import{B as BasicModal,u as useModalInner}from"./index19.js";import BasicForm from"./BasicForm.js";import"./BasicForm.vue_vue_type_style_index_0_lang.js";import{u as useLockStore}from"./lock.js";import{h as headerImg}from"./header.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./upperFirst.js";import"./uniqBy.js";import"./index21.js";import"./index22.js";import"./useFormItem.js";/* empty css       */import"./DeleteOutlined.js";import"./transButton.js";import"./download.js";import"./index23.js";import"./index24.js";const _sfc_main=defineComponent({name:"LockModal",components:{BasicModal:BasicModal,BasicForm:BasicForm},setup(){const{t:t}=useI18n(),{prefixCls:prefixCls}=useDesign("header-lock-modal"),userStore=useUserStore(),lockStore=useLockStore(),getRealName=computed((()=>{var _a;return null==(_a=userStore.getUserInfo)?void 0:_a.realName})),[register,{closeModal:closeModal}]=useModalInner(),[registerForm,{validateFields:validateFields,resetFields:resetFields}]=useForm({showActionButtonGroup:!1,schemas:[{field:"password",label:t("layout.header.lockScreenPassword"),colProps:{span:24},component:"InputPassword",required:!0}]});return{t:t,prefixCls:prefixCls,getRealName:getRealName,register:register,registerForm:registerForm,handleLock:function(){return __this=this,__arguments=null,generator=function*(){const password=(yield validateFields()).password;closeModal(),lockStore.setLockInfo({isLock:!0,pwd:password}),yield resetFields()},new Promise(((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())}));var __this,__arguments,generator},avatar:computed((()=>{const{avatar:avatar2}=userStore.getUserInfo;return avatar2||headerImg}))}}}),_hoisted_1=["src"];const LockModal=_export_sfc(_sfc_main,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_BasicForm=resolveComponent("BasicForm"),_component_a_button=resolveComponent("a-button"),_component_BasicModal=resolveComponent("BasicModal");return openBlock(),createBlock(_component_BasicModal,mergeProps({footer:null,title:_ctx.t("layout.header.lockScreen")},_ctx.$attrs,{class:_ctx.prefixCls,onRegister:_ctx.register}),{default:withCtx((()=>[createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}__entry`)},[createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}__header`)},[createBaseVNode("img",{src:_ctx.avatar,class:normalizeClass(`${_ctx.prefixCls}__header-img`)},null,10,_hoisted_1),createBaseVNode("p",{class:normalizeClass(`${_ctx.prefixCls}__header-name`)},toDisplayString(_ctx.getRealName),3)],2),createVNode(_component_BasicForm,{onRegister:_ctx.registerForm},null,8,["onRegister"]),createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}__footer`)},[createVNode(_component_a_button,{type:"primary",block:"",class:"mt-2",onClick:_ctx.handleLock},{default:withCtx((()=>[createTextVNode(toDisplayString(_ctx.t("layout.header.lockScreenBtn")),1)])),_:1},8,["onClick"])],2)],2)])),_:1},16,["title","class","onRegister"])}]]);export{LockModal as default};
