import{d as defineComponent,p as propTypes,r as ref,E as useDesign,C as computed,o as openBlock,e as createElementBlock,j as createVNode,i as withCtx,v as createBaseVNode,z as normalizeClass,y as unref,W as normalizeStyle,fu as Spin,b as _export_sfc}from"./index.js";import{u as useWindowSizeFn}from"./useWindowSizeFn.js";import{a as useLayoutHeight}from"./useContentViewHeight.js";const _hoisted_1=["src"],FramePage=_export_sfc(defineComponent({__name:"index",props:{frameSrc:propTypes.string.def("")},setup(__props){const loading=ref(!0),topRef=ref(50),heightRef=ref(window.innerHeight),frameRef=ref(),{headerHeightRef:headerHeightRef}=useLayoutHeight(),{prefixCls:prefixCls}=useDesign("iframe-page");useWindowSizeFn(calcHeight,150,{immediate:!0});const getWrapStyle=computed((()=>({height:`${unref(heightRef)}px`})));function calcHeight(){const iframe=unref(frameRef);if(!iframe)return;const top=headerHeightRef.value;topRef.value=top,heightRef.value=window.innerHeight-top;const clientHeight=document.documentElement.clientHeight-top;iframe.style.height=`${clientHeight}px`}function hideLoading(){loading.value=!1,calcHeight()}return(_ctx,_cache)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(prefixCls)),style:normalizeStyle(getWrapStyle.value)},[createVNode(unref(Spin),{spinning:loading.value,size:"large",style:normalizeStyle(getWrapStyle.value)},{default:withCtx((()=>[createBaseVNode("iframe",{src:__props.frameSrc,class:normalizeClass(`${unref(prefixCls)}__main`),ref_key:"frameRef",ref:frameRef,onLoad:hideLoading},null,42,_hoisted_1)])),_:1},8,["spinning","style"])],6))}}),[["__scopeId","data-v-0f27fd67"]]);export{FramePage as default};
