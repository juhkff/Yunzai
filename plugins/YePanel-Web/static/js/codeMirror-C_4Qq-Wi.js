import{T as B,o as N}from"./index-D6_L85rf.js";import{j as S}from"./index-Cz02NH1o.js";import{d as j,e as _,A as i,i as m,c as D,b as l,y as a,P as u,w as d,aO as v,u as y,B as k,F,aF as r,bj as O,ae as R,af as U,_ as E}from"./index-C1DCms5E.js";import{c as K}from"./database-TArL9_M6.js";const x=n=>(R("data-v-4cfba4da"),n=n(),U(),n),M={class:"mb-[10px]"},T={class:"flex"},W=x(()=>l("div",{class:"prepend"},"key:",-1)),$={class:"mb-[10px]"},z={class:"flex"},A=x(()=>l("div",{class:"prepend"},"过期时间:",-1)),H=j({__name:"codeMirror",props:{data:{default:()=>({key:"",value:"",expire:-1,db:"0"})}},setup(n,{expose:h}){const b=[S(),N],e=_(n.data),g=()=>{e.value.key&&K(e.value.key,e.value.db).then(s=>{s.success?s.data.expire===-2?r("该key可用",{customClass:"el",type:"success"}):r("该key已存在",{customClass:"el",type:"warning"}):r(`查询失败: ${s.message}`,{customClass:"el",type:"error"})})},c=_(!1),C=()=>{e.value.key+=O(),c.value=!0},V=()=>{e.value.key=e.value.key.slice(0,-32),c.value=!1};return h({getData:()=>({key:e.value.key,value:e.value.value,expire:e.value.expire}),checkCode:()=>{if(e.value.value.startsWith("{")||e.value.value.startsWith("["))try{JSON.parse(e.value.value)}catch(s){return r(s.message,{customClass:"el",type:"error"}),!1}return e.value.key?!0:(r("请输入key",{customClass:"el",type:"error"}),!1)}}),(s,t)=>{const w=i("el-input"),p=i("el-button"),f=i("el-text"),I=i("el-input-number");return m(),D(F,null,[l("div",M,[l("div",T,[W,a(w,{modelValue:e.value.key,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.key=o),placeholder:"key",onInput:t[1]||(t[1]=o=>c.value=!1)},null,8,["modelValue"]),a(p,{class:"ml-[10px]",onClick:g},{default:u(()=>[a(d(v),{icon:"material-symbols:frame-inspect",width:20,height:20})]),_:1}),c.value?(m(),y(p,{key:0,onClick:V},{default:u(()=>[a(d(v),{icon:"carbon:reset",width:20,height:20})]),_:1})):(m(),y(p,{key:1,onClick:C},{default:u(()=>[a(d(v),{icon:"mingcute:random-fill",width:20,height:20})]),_:1}))]),a(f,{style:{color:"#909399"}},{default:u(()=>[k("会覆盖旧的值")]),_:1})]),l("div",$,[l("div",z,[A,a(I,{modelValue:e.value.expire,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.expire=o),placeholder:"key"},null,8,["modelValue"])]),a(f,{style:{color:"#909399"}},{default:u(()=>[k("-1为不过期,单位秒")]),_:1})]),a(d(B),{modelValue:e.value.value,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.value=o),placeholder:"请输入数据...",style:{maxHeight:"500px",marginBottom:"20px"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:b},null,8,["modelValue"])],64)}}}),Y=E(H,[["__scopeId","data-v-4cfba4da"]]);export{Y as default};
