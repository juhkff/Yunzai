import{d as D,i as R,u as Y}from"./Bot-PA57q4Tb.js";import{d as q,e as s,A as u,i as t,u as o,P as a,y as l,B as c,x as f,c as G,F as M,q as S,C as E,a_ as j,aY as z,aG as _,_ as H}from"./index-xwgbA_G8.js";import{i as J}from"./home-DNH0m5pN.js";import{_ as K}from"./timeline.vue_vue_type_script_setup_true_lang-4tUc-2cW.js";const O=q({__name:"options",props:{data:{default:()=>({info:{title:"",desc:"",authors:[],link:"",name:""},installed:!1})},addInstall:{type:Function,default:()=>{}},removeInstall:{type:Function,default:()=>{}}},setup(I){const v=I,e=s(v.data),C=s("info"),g=s(""),x=s(!0),m=s(""),k=s([]),L=s(!0),T=s(""),P=i=>{switch(i){case"readme":g.value||D(e.value.info.link).then(n=>{x.value=!1,n.success?g.value=n.data.replace(/YePanel\/api\/transit\?/g,`${j().replace(/\/$/,"")}/api/transit?accessToken=${z().accessToken}&`):m.value=n.message});break;case"updateLog":k.value.length||J(e.value.info.name).then(n=>{L.value=!1,n.success?k.value=n.data.log:T.value=n.message});break}},b=s(!1),y=s(!1),w=()=>{b.value=!0,R(e.value.info.link).then(i=>{b.value=!1,i.success?(_("安装成功~Ciallo～(∠・ω< )⌒☆",{type:"success",customClass:"el"}),v.addInstall(e.value.info.name),e.value.installed=!0):_(i.message,{type:"error",customClass:"el"})})},F=()=>{y.value=!0,Y(e.value.info.name).then(i=>{y.value=!1,i.success?(v.removeInstall(e.value.info.name),e.value.installed=!1,_("卸载成功~Ciallo～(∠・ω< )⌒☆",{type:"success",customClass:"el"})):_("卸载失败..."+i.message,{type:"error",customClass:"el"})})};return(i,n)=>{const r=u("el-descriptions-item"),V=u("el-link"),B=u("el-button"),N=u("el-descriptions"),h=u("el-tab-pane"),p=u("el-result"),$=u("v-md-preview"),A=u("el-scrollbar"),U=u("el-tabs");return t(),o(U,{modelValue:C.value,"onUpdate:modelValue":n[0]||(n[0]=d=>C.value=d),class:"mb-[20px]",onTabChange:P},{default:a(()=>[l(h,{label:"详情",name:"info"},{default:a(()=>[l(N,{border:"",column:1},{default:a(()=>[l(r,{label:"标题"},{default:a(()=>[c(f(e.value.info.title),1)]),_:1}),l(r,{label:"名称"},{default:a(()=>[c(f(e.value.info.name),1)]),_:1}),l(r,{label:"链接"},{default:a(()=>[l(V,{underline:!1,href:e.value.info.link,target:"_blank",type:"primary"},{default:a(()=>[c(f(e.value.info.link),1)]),_:1},8,["href"])]),_:1}),l(r,{label:"作者"},{default:a(()=>[(t(!0),G(M,null,S(e.value.info.authors,d=>(t(),o(V,{key:d.link,underline:!1,href:d.link,target:"_blank",type:d.link?"primary":"default",class:"mr-[10px]"},{default:a(()=>[c(f(d.name),1)]),_:2},1032,["href","type"]))),128))]),_:1}),l(r,{label:"描述"},{default:a(()=>[c(f(e.value.info.desc),1)]),_:1}),l(r,{label:"操作"},{default:a(()=>[e.value.installed?(t(),o(B,{key:1,type:"danger",loading:y.value,onClick:F},{default:a(()=>[c(" 卸载 ")]),_:1},8,["loading"])):(t(),o(B,{key:0,type:"success",loading:b.value,onClick:w},{default:a(()=>[c(" 安装 ")]),_:1},8,["loading"]))]),_:1})]),_:1})]),_:1}),l(h,{label:"README",name:"readme",class:"flex-c"},{default:a(()=>[l(A,null,{default:a(()=>[x.value?(t(),o(p,{key:0,icon:"info",title:"加载中..."})):m.value?(t(),o(p,{key:1,icon:"error",title:m.value},null,8,["title"])):E("",!0),l($,{text:g.value},null,8,["text"])]),_:1})]),_:1}),e.value.installed?(t(),o(h,{key:0,label:"更新日志",name:"updateLog",class:"flex-c"},{default:a(()=>[L.value?(t(),o(p,{key:0,icon:"info",title:"加载中..."})):T.value?(t(),o(p,{key:1,icon:"error",title:m.value},null,8,["title"])):(t(),o(K,{key:2,log:k.value,link:e.value.info.link},null,8,["log","link"]))]),_:1})):E("",!0)]),_:1},8,["modelValue"])}}}),ee=H(O,[["__scopeId","data-v-5808755f"]]);export{ee as default};
