import{b as M,c as T}from"./system-9ARTRrZR.js";import{d as y,e as _,A as n,V as E,i as c,u,P as s,y as r,b as h,B as S,c as b,F as x,q as L,D as W,aF as q}from"./index-C1DCms5E.js";import{C as I}from"./ansi_to_html-4-BCAPBq.js";const K={class:"flex-c"},O=["innerHTML"],z=y({__name:"index",setup(P){const C=new I,d=_([]),V={MARK:"#999999",WARN:"#ffaa00",ERRO:"#ff0000"},w=t=>{F()},p=_(!1),f=_([]),m=_("");M().then(t=>{f.value=t.data.reverse()});const F=()=>{p.value=!0,T(m.value).then(t=>{if(t.success){let e="";const l=t.data.split(`
`).reduce((i,a)=>(a.startsWith("[")?(e&&i.push(g(e)),e=a):e?e+=`
`+a:e=a,i),[]);e&&l.push(g(e)),d.value=l}else q("获取日志失败: "+t.message,{type:"error",customClass:"el"});p.value=!1})},g=t=>{const e=/^\[(.*?)\]\[(.*?)\]([\s\S]*)/,l=t.match(e);return l?{timestamp:l[1],color:V[l[2]],content:C.toHtml(l[3].replace(/\r$/,"").replace(/\n|\r/g,"<br/>").replace(/\s|\t/g,"&nbsp;&nbsp;")).replace(/#00A/g,"#4169e1").replace(/#FFF/g,"#606266").replace("<br/><br/>","<br/>")}:{}};return(t,e)=>{const l=n("el-text"),i=n("el-option"),a=n("el-select"),v=n("el-col"),k=n("el-timeline-item"),B=n("el-timeline"),A=n("el-scrollbar"),D=n("el-row"),N=n("el-card"),R=E("loading");return c(),u(N,null,{default:s(()=>[r(D,{gutter:20},{default:s(()=>[r(v,{xs:24,lg:5,class:"mb-[10px]"},{default:s(()=>[h("div",K,[r(l,{class:"w-[60px]"},{default:s(()=>[S("数据源")]),_:1}),r(a,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),placeholder:"",onChange:w},{default:s(()=>[(c(!0),b(x,null,L(f.value,o=>(c(),u(i,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),W((c(),u(v,{span:24},{default:s(()=>[r(A,{height:"600px"},{default:s(()=>[r(B,{class:"pl-[10px]"},{default:s(()=>[(c(!0),b(x,null,L(d.value,(o,H)=>(c(),u(k,{key:H,color:o.color,timestamp:o.timestamp},{default:s(()=>[h("div",{innerHTML:o.content},null,8,O)]),_:2},1032,["color","timestamp"]))),128))]),_:1})]),_:1})]),_:1})),[[R,p.value]])]),_:1})]),_:1})}}});export{z as default};
