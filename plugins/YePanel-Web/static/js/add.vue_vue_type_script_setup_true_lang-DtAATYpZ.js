import{d as _,e as t,k as o,aO as T,A as c,i as B,u as L,P as f,y as d,w as g}from"./index-C1DCms5E.js";import{P as x}from"./index-BOPFo7cB.js";const k=_({__name:"add",props:{data:{default:()=>({column:[],value:"",tableInfo:{},type:"add"})}},setup(p,{expose:m}){var n,i;const a=t(p.data),u=t({}),s=t([]);for(const l in a.value.tableInfo){if(["createdAt","updatedAt"].includes(l))continue;const e={label:l,prop:l};if(e.fieldProps={},a.value.tableInfo[l].notnull&&(u.value[l]=[{required:!0,message:`请填写${l}`}]),a.value.tableInfo[l].dflt_value&&a.value.type==="add"&&(a.value.value[l]=(i=(n=a.value.tableInfo[l].dflt_value)==null?void 0:n.replace)==null?void 0:i.call(n,/'/g,"")),e.fieldProps.placeholder=`类型: ${a.value.tableInfo[l].type}`,!a.value.tableInfo[l].autoincrement){switch(I(a.value.tableInfo[l].type)){case"INTEGER":e.valueType="input-number";break;case"TEXT":e.valueType="textarea",e.fieldProps.autosize={minRows:2,maxRows:10},e.fieldProps.resize="none";break;case"NUMERIC":case"BLOB":case"REAL":default:e.valueType="textarea",e.fieldProps.autosize={minRows:2,maxRows:10},e.fieldProps.resize="none";break}a.value.tableInfo[l].pk&&(a.value.type==="edit"?e.fieldProps.disabled=!0:a.value.tableInfo[l].autoincrement||(u.value[l]=[{required:!0,message:`请填写${l}`}]),e.renderLabel=()=>o("span",{class:"flex-c"},[o(T,{icon:"mdi:primary-key",width:18,height:18}),o("span",{},e.label)])),s.value.push(e)}}const r=t();function v(){return r.value.formInstance}function b(){return a.value.value}m({getRef:v,getData:b});function I(l){const e=l.toUpperCase();return e.includes("INT")?"INTEGER":e.includes("CHAR")||e.includes("CLOB")||e.includes("TEXT")?"TEXT":e.includes("BLOB")?"BLOB":e.includes("REAL")||e.includes("FLOA")||e.includes("DOUB")?"REAL":e.includes("NUMERIC")||e.includes("DECIMAL")||e.includes("BOOLEAN")||e.includes("DATE")?"NUMERIC":"BLOB"}return(l,e)=>{const y=c("el-col"),E=c("el-row");return B(),L(E,{justify:"center"},{default:f(()=>[d(y,{lg:20,xs:24},{default:f(()=>[d(g(x),{ref_key:"ruleFormRef",ref:r,modelValue:a.value.value,"onUpdate:modelValue":e[0]||(e[0]=R=>a.value.value=R),rules:u.value,columns:s.value,"inline-message":"",labelWidth:"120px","label-position":"right","has-footer":!1},null,8,["modelValue","rules","columns"])]),_:1})]),_:1})}}});export{k as _};
