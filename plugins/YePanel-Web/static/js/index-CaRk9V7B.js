import{d as S,ay as T,$ as I,aX as q,e as l,H as w,aY as O,A as U,i as p,u as d,w as g,aZ as _,v as x,a_ as A,aF as k,a$ as D,b0 as M,aR as P,b1 as R,aO as j}from"./index-C1DCms5E.js";import{i as F,p as H}from"./vue3-sfc-loader.esm-CxdrzR-e.js";import{E as N}from"./index-BOPFo7cB.js";import"./sortable.esm-C0-Qcoum.js";const G=S({name:"plugins",__name:"index",setup(L){const c=T(),y=I(),n=y.path.split("/")[1],C=(e,o,s,m)=>(s={baseURL:_()+"/"+n,...s},A.request(e,o,s,m)),$=q().accessToken,u=l(""),v=l(!0),b={vue:D,"plus-pro-components":H,"element-plus":N,echarts:M,"@message":k,"@addDialog":P,"@pureadmin/utils":R,iconify:j},E=Object.keys(c.code[n].components).length,r=l(0),h=(e,o)=>new Promise((s,m)=>{F(e,{getFile:t=>c.code[n][o][t.replace(/.vue$/,"")],moduleCache:b,addStyle(t){const f=`${n}-vue-styles`;let a=document.getElementById(f);if(a)a.textContent=t;else{a=Object.assign(document.createElement("style"),{id:f,textContent:t});const B=document.head.getElementsByTagName("style")[0]||null;document.head.insertBefore(a,B)}}}).then(t=>{r.value++,s(t)}).catch(t=>{u.value=`${e} 加载失败: ${t.message}`,i.value&&k(`${e} 出现错误: ${t.message}`,{type:"error",customClass:"el"}),m(t)})});(async()=>{for(const e in c.code[n].components)try{await h(`${e}.vue`,"components")}catch{return}})();const i=l(null);return w(r,()=>{r.value===E&&h(`${y.name.toString().split("/")[1]}.vue`,"main").then(e=>{v.value=!1,i.value=e})}),O((e,o,s)=>(o.$options.__name,!1)),(e,o)=>{const s=U("el-result");return u.value?(p(),d(s,{key:0,icon:"error",style:{height:"70vh"},title:"加载错误","sub-title":u.value},null,8,["sub-title"])):v.value?(p(),d(s,{key:1,style:{height:"70vh"},icon:"info",title:"加载中"})):(p(),d(x(i.value),{key:2,baseUrl:g(_),pluginName:g(n),request:C,accessToken:g($)},null,8,["baseUrl","pluginName","accessToken"]))}}});export{G as default};
