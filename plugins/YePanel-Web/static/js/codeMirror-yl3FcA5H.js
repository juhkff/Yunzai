import{T as B,o as N}from"./index-BBIzkHyc.js";import{j as S}from"./index-TQ8Vss1d.js";import{d as D,e as _,A as i,i as m,c as R,b as l,y as a,P as u,w as d,aP as v,u as y,B as k,F as U,aG as r,bk as j,ae as E,af as F,_ as K}from"./index-xwgbA_G8.js";import{c as M}from"./database-DzSUTjct.js";const x=n=>(E("data-v-4cfba4da"),n=n(),F(),n),O={class:"mb-[10px]"},P={class:"flex"},T=x(()=>l("div",{class:"prepend"},"key:",-1)),W={class:"mb-[10px]"},$={class:"flex"},z=x(()=>l("div",{class:"prepend"},"过期时间:",-1)),A=D({__name:"codeMirror",props:{data:{default:()=>({key:"",value:"",expire:-1,db:"0"})}},setup(n,{expose:h}){const b=[S(),N],e=_(n.data),g=()=>{e.value.key&&M(e.value.key,e.value.db).then(s=>{s.success?s.data.expire===-2?r("该key可用",{customClass:"el",type:"success"}):r("该key已存在",{customClass:"el",type:"warning"}):r(`查询失败: ${s.message}`,{customClass:"el",type:"error"})})},c=_(!1),C=()=>{e.value.key+=j(),c.value=!0},V=()=>{e.value.key=e.value.key.slice(0,-32),c.value=!1};return h({getData:()=>({key:e.value.key,value:e.value.value,expire:e.value.expire}),checkCode:()=>{if(e.value.value.startsWith("{")||e.value.value.startsWith("["))try{JSON.parse(e.value.value)}catch(s){return r(s.message,{customClass:"el",type:"error"}),!1}return e.value.key?!0:(r("请输入key",{customClass:"el",type:"error"}),!1)}}),(s,t)=>{const w=i("el-input"),p=i("el-button"),f=i("el-text"),I=i("el-input-number");return m(),R(U,null,[l("div",O,[l("div",P,[T,a(w,{modelValue:e.value.key,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.key=o),placeholder:"key",onInput:t[1]||(t[1]=o=>c.value=!1)},null,8,["modelValue"]),a(p,{class:"ml-[10px]",onClick:g},{default:u(()=>[a(d(v),{icon:"material-symbols:frame-inspect",width:20,height:20})]),_:1}),c.value?(m(),y(p,{key:0,onClick:V},{default:u(()=>[a(d(v),{icon:"carbon:reset",width:20,height:20})]),_:1})):(m(),y(p,{key:1,onClick:C},{default:u(()=>[a(d(v),{icon:"mingcute:random-fill",width:20,height:20})]),_:1}))]),a(f,{style:{color:"#909399"}},{default:u(()=>[k("会覆盖旧的值")]),_:1})]),l("div",W,[l("div",$,[z,a(I,{modelValue:e.value.expire,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.expire=o),placeholder:"key"},null,8,["modelValue"])]),a(f,{style:{color:"#909399"}},{default:u(()=>[k("-1为不过期,单位秒")]),_:1})]),a(d(B),{modelValue:e.value.value,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.value=o),placeholder:"请输入数据...",style:{maxHeight:"500px",marginBottom:"20px"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:b},null,8,["modelValue"])],64)}}}),Y=K(A,[["__scopeId","data-v-4cfba4da"]]);export{Y as default};
